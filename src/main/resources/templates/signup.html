<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>회원가입</title>
</head>
<body>
<h1>회원가입</h1>
<form action="/signup" method="post">
    <div>
        <label for="email">이메일:</label>
        <input type="email" id="email" name="email" required>
        <button type="button" onclick="checkDuplicate()">중복확인</button>
    </div>
    <div>
        <label for="password">비밀번호:</label>
        <input type="password" id="password" name="password" required>
    </div>
    <!-- 파일 이름 대신 파일 이름 입력창 -->
    <div>
        <label for="profile">프로필 사진 파일 이름:</label>
        <input type="text" id="profile" name="profile">
    </div>
    <div>
        <label for="address">집 주소:</label>
        <input type="text" id="address" name="address">
    </div>
    <div>
        <label for="phone">휴대전화 번호:</label>
        <input type="tel" id="phone" name="phone">
    </div>
    <div>
        <label for="username">사용자 이름:</label>
        <input type="text" id="username" name="username">
    </div>
    <div>
        <label for="nickname">닉네임:</label>
        <input type="text" id="nickname" name="nickname">
    </div>
    <div>
        <label>성별:</label>
        <input type="radio" id="male" name="gender" value="MALE">
        <label for="male">남성</label>
        <input type="radio" id="female" name="gender" value="FEMALE">
        <label for="female">여성</label>
        <input type="radio" id="other" name="gender" value="OTHER">
        <label for="other">기타</label>
    </div>
    <button type="submit">가입하기</button>
</form>

<!-- 중복확인 버튼을 눌렀을 때 실행할 JavaScript 함수 -->
<script>
    function checkDuplicate() {
        let email = document.getElementById("email").value; // 입력된 이메일 가져오기
        let xhr = new XMLHttpRequest(); // XMLHttpRequest 객체 생성
        xhr.open("GET", "/signup/check/" + email, true); // 서버로 요청 보내기
        xhr.onreadystatechange = function() {
            if (xhr.readyState == 4 && xhr.status == 200) { // 요청 완료 및 성공 시
                let response = xhr.responseText; // 서버 응답 가져오기
                alert(response); // 응답 메시지 출력
            }
        };
        xhr.send(); // 요청 보내기
    }
</script>
</body>
</html>